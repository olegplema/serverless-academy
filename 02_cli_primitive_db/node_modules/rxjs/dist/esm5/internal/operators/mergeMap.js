import { map } from 'rxjs/dist/cjs/internal/operators/map';
import { innerFrom } from 'rxjs/dist/cjs/internal/observable/innerFrom';
import { operate } from 'rxjs/dist/cjs/internal/util/lift';
import { mergeInternals } from 'rxjs/dist/cjs/internal/operators/mergeInternals';
import { isFunction } from 'rxjs/dist/cjs/internal/util/isFunction';
export function mergeMap(project, resultSelector, concurrent) {
    if (concurrent === void 0) { concurrent = Infinity; }
    if (isFunction(resultSelector)) {
        return mergeMap(function (a, i) { return map(function (b, ii) { return resultSelector(a, b, i, ii); })(innerFrom(project(a, i))); }, concurrent);
    }
    else if (typeof resultSelector === 'number') {
        concurrent = resultSelector;
    }
    return operate(function (source, subscriber) { return mergeInternals(source, subscriber, project, concurrent); });
}
//# sourceMappingURL=mergeMap.js.map